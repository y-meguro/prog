int_pf:
        ;-----------------------------------------
        ; 【スタックフレームの構築】
        ;-----------------------------------------
        push ebp
        mov ebp, esp

        ;-----------------------------------------
        ; 【レジスタの保存】
        ;-----------------------------------------
        pusha
        push ds
        push es

        ;-----------------------------------------
        ; 例外を生成したアドレスの確認
        ;-----------------------------------------
        mov eax, cr2
        and eax, ~0x0FFF
        cmp eax, 0x0010_7000
        jne .10F

        ;-----------------------------------------
        ; 描画パラメータをコピー
        ;-----------------------------------------
        mov [0x00106000 + 0x107 * 4], dword 0x00107007
        cdecl memcpy, 0x0010_7000, DRAW_PARAM, rose_size

        jmp .10E
.10F:

        ;-----------------------------------------
        ; スタックの調整
        ;-----------------------------------------
        add esp, 4
        add esp, 4
        popa
        pop ebp

        ;-----------------------------------------
        ; タスク終了処理
        ;-----------------------------------------
        pushf
        push cs
        push int_stop

        mov eax, .s0
        iret
.10E:

        ;-----------------------------------------
        ; 【レジスタの復帰】
        ;-----------------------------------------
        pop es
        pop ds
        popa

        ;-----------------------------------------
        ; 【スタックフレームの破棄】
        ;-----------------------------------------
        mov esp, ebp
        pop ebp

        ;-----------------------------------------
        ; エラーコードの破棄
        ;-----------------------------------------
        add esp, 4
        iret

.s0     db " < PAGE FAULT > ", 0
